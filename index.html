<!DOCTYPE html>
<html>
  <head>
    <!-- A-Frame 1.4.0 にアップグレード（スティック対応が安定） -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.0/dist/aframe-environment-component.min.js"></script>
  </head>

  <body>
    <a-scene vr-mode-ui="enabled: true">

      <!-- VR移動リグ（重要） -->
      <a-entity id="rig"
        movement-controls="enabled: true; speed: 0.2; camera: #camera; fly: false; controller: true"
        position="0 1.6 0">

        <!-- プレイヤーカメラ -->
        <a-entity id="camera" camera wasd-controls-enabled="false" look-controls></a-entity>

        <!-- コントローラ（Questでスティック入力を正しく取得） -->
        <a-entity id="leftHand"  tracked-controls="controller: 0; idPrefix: OpenVR"></a-entity>
        <a-entity id="rightHand" tracked-controls="controller: 1; idPrefix: OpenVR"></a-entity>
      </a-entity>

      <!-- 背景 -->
      <a-entity environment="preset: forest"></a-entity>

      <!-- オブジェクト -->
      <a-box position="0 1 -4" color="red"></a-box>
      <a-sphere position="0 3 -4" color="blue"></a-sphere>

    </a-scene>
  </body>
</html>
